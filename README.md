# Hina Time

基於 [time_prompt](https://github.com/wuyan1003/time_prompt) 二次開發，為 System Prompt 動態注入干支紀時提示詞。

## 特性

- **干支紀時**

使用干支紀時法，為 AI 构建獨特的時間觀。

- **間隔感知**

使用對話間隔感知，為 AI 构建時間的流逝感。

- **高度自訂**

提供高度自訂的時間模板，自由決定指定時間下她的狀態。

## 使用

1. 下載 Code 為 ZIP；
2. 插件管理 - 安裝插件，選擇下載的 ZIP。

## 說明

本插件透過監聽 `on_llm_request` 事件，在每次大型語言模型（LLM）處理請求前介入。它會根據當前時間動態生成一段包含干支紀時、場景描述及對話間隔的提示詞。

為了最大化 LLM 服務的快取效率，本插件採取了 **在 System Prompt 尾部注入** 的策略。

LLM 會對輸入的提示詞進行快取。如果 System Prompt 的開頭部分保持不變，服務便可能命中快取，從而複用已經計算過的結果，這能顯著降低延遲並節省成本。

本插件生成的提示詞基於干支紀時法，避免了『時:分:秒』紀時所致的對話快取失效，也確保了在高請求環境下依舊可維持一定的快取命中。

## 注意

如果您使用 DeepSeek R1，那麽建議禁用任何的 **時間類插件**。

R1 的頑固性和糟糕的邏輯推理會致使沉浸式體驗大打折扣，這是一個例子：

>我們剛剛開始對話，現在是乙巳年的子時，我在妖怪之山的山麓地帶靜靜觀察星空。
用戶的問候是「**晚上好**」，**但** 根據我的時間認知，現在是深夜子時，接近凌晨。**我需要溫和地糾正用戶的時間感知錯誤**，同時保持友善態度。
